"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("pages/_app",{

/***/ "./services/blockchain.ts":
/*!********************************!*\
  !*** ./services/blockchain.ts ***!
  \********************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"checkWallet\": function() { return /* binding */ checkWallet; },\n/* harmony export */   \"connectWallet\": function() { return /* binding */ connectWallet; },\n/* harmony export */   \"createAnswer\": function() { return /* binding */ createAnswer; },\n/* harmony export */   \"createQuestion\": function() { return /* binding */ createQuestion; },\n/* harmony export */   \"deleteQuestion\": function() { return /* binding */ deleteQuestion; },\n/* harmony export */   \"getAnswers\": function() { return /* binding */ getAnswers; },\n/* harmony export */   \"getQuestion\": function() { return /* binding */ getQuestion; },\n/* harmony export */   \"getQuestions\": function() { return /* binding */ getQuestions; },\n/* harmony export */   \"loadData\": function() { return /* binding */ loadData; },\n/* harmony export */   \"payWinner\": function() { return /* binding */ payWinner; },\n/* harmony export */   \"updateQuestion\": function() { return /* binding */ updateQuestion; }\n/* harmony export */ });\n/* harmony import */ var _store__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/store */ \"./store/index.ts\");\n/* harmony import */ var ethers__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ethers */ \"./node_modules/ethers/lib.esm/index.js\");\n/* harmony import */ var _store_globalSlices__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/store/globalSlices */ \"./store/globalSlices.ts\");\n/* harmony import */ var _artifacts_contractAddress_json__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/artifacts/contractAddress.json */ \"./artifacts/contractAddress.json\");\n/* harmony import */ var _artifacts_contracts_AnswerToEarn_sol_AnswerToEarn_json__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/artifacts/contracts/AnswerToEarn.sol/AnswerToEarn.json */ \"./artifacts/contracts/AnswerToEarn.sol/AnswerToEarn.json\");\n/* provided dependency */ var process = __webpack_require__(/*! process */ \"./node_modules/process/browser.js\");\n\n\n\n\n\nconst { setWallet , setAnswers , setQuestion , setQuestions  } = _store_globalSlices__WEBPACK_IMPORTED_MODULE_1__.globalActions;\nconst ContractAddress = _artifacts_contractAddress_json__WEBPACK_IMPORTED_MODULE_2__.address //address contains the ethereum address where sc is deployed\n;\nconst ContractAbi = _artifacts_contracts_AnswerToEarn_sol_AnswerToEarn_json__WEBPACK_IMPORTED_MODULE_3__.abi //abi descrives the interface of smart contract. includes info about functions, names, inputs / types, includes info about the contract itself\n;\nlet ethereum;\nlet tx;\nif (true) {\n    ethereum = window.ethereum;\n}\nconst toWei = (num)=>ethers__WEBPACK_IMPORTED_MODULE_4__.ethers.utils.parseEther(num.toString());\nconst fromWei = (num)=>ethers__WEBPACK_IMPORTED_MODULE_4__.ethers.utils.formatEther(num);\nconst getEthereumContract = async ()=>{\n    var _ethereum_request;\n    const accounts = await (ethereum === null || ethereum === void 0 ? void 0 : (_ethereum_request = ethereum.request) === null || _ethereum_request === void 0 ? void 0 : _ethereum_request.call(ethereum, {\n        method: \"eth_accounts\"\n    }));\n    const provider = (accounts === null || accounts === void 0 ? void 0 : accounts[0]) ? new ethers__WEBPACK_IMPORTED_MODULE_4__.ethers.providers.Web3Provider(ethereum) : new ethers__WEBPACK_IMPORTED_MODULE_4__.ethers.providers.JsonRpcProvider(process.env.NEXT_APP_RPC_URL);\n    //if there is an account available the wallet is set to null because dont need to create a new wallet\n    const wallet = (accounts === null || accounts === void 0 ? void 0 : accounts[0]) ? null : ethers__WEBPACK_IMPORTED_MODULE_4__.ethers.Wallet.createRandom();\n    const signer = provider.getSigner((accounts === null || accounts === void 0 ? void 0 : accounts[0]) ? undefined : wallet === null || wallet === void 0 ? void 0 : wallet.address);\n    const contract = new ethers__WEBPACK_IMPORTED_MODULE_4__.ethers.Contract(ContractAddress, ContractAbi, signer);\n    return contract;\n};\nconst connectWallet = async ()=>{\n    try {\n        var _ethereum_request;\n        if (!ethereum) return reportError(\"Please install Metamask\");\n        //request user accounts from metamask. dapp request access to user's ethereum accounts\n        const accounts = await ((_ethereum_request = ethereum.request) === null || _ethereum_request === void 0 ? void 0 : _ethereum_request.call(ethereum, {\n            method: \"eth_requestAccounts\"\n        }));\n        _store__WEBPACK_IMPORTED_MODULE_0__.store.dispatch(setWallet(accounts === null || accounts === void 0 ? void 0 : accounts[0])) // wallet address stored. access first account in array\n        ;\n    } catch (error) {\n        reportError(error);\n    }\n};\nconst checkWallet = async ()=>{\n    try {\n        var _ethereum_request;\n        if (!ethereum) return reportError(\"Please install Metamask\");\n        const accounts = await ((_ethereum_request = ethereum.request) === null || _ethereum_request === void 0 ? void 0 : _ethereum_request.call(ethereum, {\n            method: \"eth_accounts\"\n        }));\n        // monitor chain change\n        ethereum.on(\"chainChanged\", ()=>{\n            window.location.reload();\n        });\n        ethereum.on(\"accountsChanged\", async ()=>{\n            _store__WEBPACK_IMPORTED_MODULE_0__.store.dispatch(setWallet(accounts === null || accounts === void 0 ? void 0 : accounts[0]));\n            await checkWallet();\n        });\n        if (accounts === null || accounts === void 0 ? void 0 : accounts.length) {\n            _store__WEBPACK_IMPORTED_MODULE_0__.store.dispatch(setWallet(accounts[0]));\n        } else {\n            _store__WEBPACK_IMPORTED_MODULE_0__.store.dispatch(setWallet(\"\"));\n            reportError(\"Please connect wallet, no accounts found.\");\n        }\n    } catch (error) {\n        reportError(error);\n    }\n};\nconst getQuestions = async ()=>{\n    const contract = await getEthereumContract();\n    const questions = await contract.getQuestions();\n    return structureQuestions(questions);\n};\nconst getQuestion = async (id)=>{\n    const contract = await getEthereumContract();\n    const question = await contract.getQuestion(id);\n    return structureQuestions([\n        question\n    ])[0];\n};\nconst createQuestion = async (data)=>{\n    if (!ethereum) {\n        reportError(\"Please install Metamask\");\n        return Promise.reject(new Error(\"Metamask not installed\"));\n    }\n    try {\n        const contract = await getEthereumContract();\n        console.log(\"THE CONTRACT\", contract);\n        const { title , description , tags , prize  } = data;\n        console.log(\"THE DATA\", data);\n        tx = await contract.createQuestion(title, description, tags, {\n            value: toWei(Number(prize))\n        });\n        console.log(\"tx\", tx);\n        await tx.wait();\n        console.log(\"tx\", tx);\n        const questions = await getQuestions();\n        console.log(\"QUESTIONS\", questions);\n        _store__WEBPACK_IMPORTED_MODULE_0__.store.dispatch(setQuestions(questions));\n        return Promise.resolve(tx);\n    } catch (error) {\n        reportError(error);\n        return Promise.reject(error);\n    }\n};\nconst updateQuestion = async (id, data)=>{\n    if (!ethereum) {\n        reportError(\"Please install Metamask\");\n        return Promise.reject(new Error(\"Metamask not installed\"));\n    }\n    try {\n        const contract = await getEthereumContract();\n        const { title , description , tags  } = data;\n        tx = await contract.updateQuestion(id, title, description, tags);\n        await tx.wait();\n        const question = await getQuestion(id);\n        _store__WEBPACK_IMPORTED_MODULE_0__.store.dispatch(setQuestion(question));\n        return Promise.resolve(tx);\n    } catch (error) {\n        reportError(error);\n        return Promise.reject(error);\n    }\n};\nconst deleteQuestion = async (id)=>{\n    if (!ethereum) {\n        reportError(\"Please install Metamask\");\n        return Promise.reject(new Error(\"Metamask not installed\"));\n    }\n    try {\n        const contract = await getEthereumContract();\n        tx = await contract.deleteQuestion(id);\n        await tx.wait();\n        const question = await getQuestion(id);\n        _store__WEBPACK_IMPORTED_MODULE_0__.store.dispatch(setQuestion(question));\n        return Promise.resolve(tx);\n    } catch (error) {\n        reportError(error);\n        return Promise.reject(error);\n    }\n};\nconst createAnswer = async (id, answer)=>{\n    if (!ethereum) {\n        reportError(\"Please install Metamask\");\n        return Promise.reject(new Error(\"Metamask not installed\"));\n    }\n    try {\n        const contract = await getEthereumContract();\n        tx = await contract.addAnswer(id, answer);\n        await tx.wait();\n        const question = await getQuestion(id);\n        const answers = await getAnswers(id);\n        _store__WEBPACK_IMPORTED_MODULE_0__.store.dispatch(setQuestion(question));\n        _store__WEBPACK_IMPORTED_MODULE_0__.store.dispatch(setAnswers(answers));\n        return Promise.resolve(tx);\n    } catch (error) {\n        reportError(error);\n        return Promise.reject(error);\n    }\n};\nconst payWinner = async (qid, id)=>{\n    if (!ethereum) {\n        reportError(\"Please install Metamask\");\n        return Promise.reject(new Error(\"Metamask not installed\"));\n    }\n    try {\n        const contract = await getEthereumContract();\n        tx = await contract.payWinner(qid, id);\n        await tx.wait();\n        const question = await getQuestion(id);\n        const answers = await getAnswers(id);\n        _store__WEBPACK_IMPORTED_MODULE_0__.store.dispatch(setQuestion(question));\n        _store__WEBPACK_IMPORTED_MODULE_0__.store.dispatch(setAnswers(answers));\n        return Promise.resolve(tx);\n    } catch (error) {\n        reportError(error);\n        return Promise.reject(error);\n    }\n};\nconst getAnswers = async (id)=>{\n    const contract = await getEthereumContract();\n    const answers = await contract.getAnswers(id);\n    return structureAnswers(answers) || [];\n};\nconst loadData = async ()=>{\n    await getQuestions();\n};\nconst reportError = (error)=>{\n    console.log(error);\n};\nconst structureQuestions = (questions)=>questions.map((question)=>({\n            id: Number(question.id),\n            title: question.title,\n            description: question.description,\n            owner: question.owner.toLowerCase(),\n            winner: question.winner.toLowerCase(),\n            paidout: question.paidout,\n            deleted: question.deleted,\n            updated: Number(question.updated),\n            created: Number(question.created),\n            answers: Number(question.answers),\n            tags: question.tags.split(\",\").map((tag)=>tag.trim()),\n            prize: fromWei(question.prize)\n        })).sort((a, b)=>b.created - a.created);\nconst structureAnswers = (answers)=>answers.map((answer)=>({\n            id: Number(answer.id),\n            qid: Number(answer.qid),\n            comment: answer.comment,\n            owner: answer.owner.toLowerCase(),\n            deleted: answer.deleted,\n            created: Number(answer.created),\n            updated: Number(answer.updated)\n        })).sort((a, b)=>b.updated - a.updated);\n\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevExports = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevExports) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports on update so we can compare the boundary\n                // signatures.\n                module.hot.dispose(function (data) {\n                    data.prevExports = currentExports;\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevExports !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevExports, currentExports)) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevExports !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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WTtZQUNoQnBCLElBQUljLE9BQU9NLE9BQU9wQixFQUFFO1lBQ3BCeUIsS0FBS1gsT0FBT00sT0FBT0ssR0FBRztZQUN0QmlCLFNBQVN0QixPQUFPc0IsT0FBTztZQUN2QmIsT0FBT1QsT0FBT1MsS0FBSyxDQUFDQyxXQUFXO1lBQy9CRyxTQUFTYixPQUFPYSxPQUFPO1lBQ3ZCRSxTQUFTckIsT0FBT00sT0FBT2UsT0FBTztZQUM5QkQsU0FBU3BCLE9BQU9NLE9BQU9jLE9BQU87UUFDaEMsSUFDQ0ssSUFBSSxDQUFDLENBQUNDLEdBQUdDLElBQU1BLEVBQUVQLE9BQU8sR0FBR00sRUFBRU4sT0FBTztBQWN4QyIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9zZXJ2aWNlcy9ibG9ja2NoYWluLnRzPzlkNzQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgc3RvcmUgfSBmcm9tICdAL3N0b3JlJ1xuaW1wb3J0IHsgZXRoZXJzIH0gZnJvbSAnZXRoZXJzJ1xuaW1wb3J0IHsgZ2xvYmFsQWN0aW9ucyB9IGZyb20gJ0Avc3RvcmUvZ2xvYmFsU2xpY2VzJ1xuaW1wb3J0IGFkZHJlc3MgZnJvbSAnQC9hcnRpZmFjdHMvY29udHJhY3RBZGRyZXNzLmpzb24nXG5pbXBvcnQgYWJpIGZyb20gJ0AvYXJ0aWZhY3RzL2NvbnRyYWN0cy9BbnN3ZXJUb0Vhcm4uc29sL0Fuc3dlclRvRWFybi5qc29uJ1xuaW1wb3J0IHsgQW5zd2VyUHJvcCwgUXVlc3Rpb25QYXJhbXMsIFF1ZXN0aW9uUHJvcCB9IGZyb20gJ0AvdXRpbHMvaW50ZXJmYWNlcydcblxuY29uc3QgeyBzZXRXYWxsZXQsIHNldEFuc3dlcnMsIHNldFF1ZXN0aW9uLCBzZXRRdWVzdGlvbnMgfSA9IGdsb2JhbEFjdGlvbnNcbmNvbnN0IENvbnRyYWN0QWRkcmVzcyA9IGFkZHJlc3MuYWRkcmVzcyAvL2FkZHJlc3MgY29udGFpbnMgdGhlIGV0aGVyZXVtIGFkZHJlc3Mgd2hlcmUgc2MgaXMgZGVwbG95ZWRcbmNvbnN0IENvbnRyYWN0QWJpID0gYWJpLmFiaSAvL2FiaSBkZXNjcml2ZXMgdGhlIGludGVyZmFjZSBvZiBzbWFydCBjb250cmFjdC4gaW5jbHVkZXMgaW5mbyBhYm91dCBmdW5jdGlvbnMsIG5hbWVzLCBpbnB1dHMgLyB0eXBlcywgaW5jbHVkZXMgaW5mbyBhYm91dCB0aGUgY29udHJhY3QgaXRzZWxmXG5sZXQgZXRoZXJldW06IGFueVxubGV0IHR4OiBhbnlcblxuaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gIGV0aGVyZXVtID0gKHdpbmRvdyBhcyBhbnkpLmV0aGVyZXVtXG59XG5cbmNvbnN0IHRvV2VpID0gKG51bTogbnVtYmVyKSA9PiBldGhlcnMudXRpbHMucGFyc2VFdGhlcihudW0udG9TdHJpbmcoKSlcbmNvbnN0IGZyb21XZWkgPSAobnVtOiBudW1iZXIpID0+IGV0aGVycy51dGlscy5mb3JtYXRFdGhlcihudW0pXG5cbmNvbnN0IGdldEV0aGVyZXVtQ29udHJhY3QgPSBhc3luYyAoKSA9PiB7XG4gIGNvbnN0IGFjY291bnRzID0gYXdhaXQgZXRoZXJldW0/LnJlcXVlc3Q/Lih7IG1ldGhvZDogJ2V0aF9hY2NvdW50cycgfSlcbiAgY29uc3QgcHJvdmlkZXIgPSBhY2NvdW50cz8uWzBdXG4gIC8vVGhlIGV0aGVycy5wcm92aWRlcnMuV2ViM1Byb3ZpZGVyIGlzIGEgY2xhc3MgZnJvbSB0aGUgZXRoZXJzLmpzIGxpYnJhcnksIHdoaWNoIHByb3ZpZGVzIGEgY29udmVuaWVudCB3YXkgdG8gaW50ZXJhY3Qgd2l0aCB0aGUgRXRoZXJldW0gYmxvY2tjaGFpbiB2aWEgdGhlIGV0aGVyZXVtIHByb3ZpZGVyLlxuICAgID8gbmV3IGV0aGVycy5wcm92aWRlcnMuV2ViM1Byb3ZpZGVyKGV0aGVyZXVtKVxuICAvL0EgSnNvblJwY1Byb3ZpZGVyIGlzIGEgcHJvdmlkZXIgZnJvbSB0aGUgZXRoZXJzLmpzIGxpYnJhcnkgdGhhdCBjb25uZWN0cyB0byBhbiBFdGhlcmV1bSBub2RlIHZpYSBKU09OLVJQQyAoSmF2YVNjcmlwdCBPYmplY3QgTm90YXRpb24gLSBSZW1vdGUgUHJvY2VkdXJlIENhbGwpLiBUaGlzIGlzIGEgcHJvdG9jb2wgdXNlZCB0byBjb21tdW5pY2F0ZSB3aXRoIEV0aGVyZXVtIG5vZGVzLCBhbGxvd2luZyBjbGllbnRzIHRvIHBlcmZvcm0gdmFyaW91cyBhY3Rpb25zIG9uIHRoZSBibG9ja2NoYWluLCBzdWNoIGFzIHJlYWRpbmcgZGF0YSwgc2VuZGluZyB0cmFuc2FjdGlvbnMsIGFuZCBxdWVyeWluZyB0aGUgc3RhdGUuXG4gIC8vRXZlbiBpZiBubyB1c2VyIGFjY291bnRzIGFyZSBhdmFpbGFibGUsIHlvdXIgYXBwbGljYXRpb24gbWlnaHQgc3RpbGwgbmVlZCB0byBpbnRlcmFjdCB3aXRoIHRoZSBFdGhlcmV1bSBuZXR3b3JrLiBBIEpzb25ScGNQcm92aWRlciBhbGxvd3MgeW91IHRvIGRvIHRoaXMgYnkgY29ubmVjdGluZyB0byBhIHJlbW90ZSBFdGhlcmV1bSBub2RlLlxuICAvL1lvdSBjYW4gc3RpbGwgcmVhZCBkYXRhIGZyb20gdGhlIGJsb2NrY2hhaW4gd2l0aG91dCBuZWVkaW5nIGEgdXNlciBhY2NvdW50LiBGb3IgZXhhbXBsZSwgeW91IG1pZ2h0IHdhbnQgdG8gZGlzcGxheSBpbmZvcm1hdGlvbiBhYm91dCB0b2tlbnMsIGNvbnRyYWN0cywgb3IgcmVjZW50IHRyYW5zYWN0aW9ucy5cbiAgICA6IG5ldyBldGhlcnMucHJvdmlkZXJzLkpzb25ScGNQcm92aWRlcihwcm9jZXNzLmVudi5ORVhUX0FQUF9SUENfVVJMKVxuICAvL2lmIHRoZXJlIGlzIGFuIGFjY291bnQgYXZhaWxhYmxlIHRoZSB3YWxsZXQgaXMgc2V0IHRvIG51bGwgYmVjYXVzZSBkb250IG5lZWQgdG8gY3JlYXRlIGEgbmV3IHdhbGxldFxuICBjb25zdCB3YWxsZXQgPSBhY2NvdW50cz8uWzBdID8gbnVsbCA6IGV0aGVycy5XYWxsZXQuY3JlYXRlUmFuZG9tKClcbiAgY29uc3Qgc2lnbmVyID0gcHJvdmlkZXIuZ2V0U2lnbmVyKGFjY291bnRzPy5bMF0gPyB1bmRlZmluZWQgOiB3YWxsZXQ/LmFkZHJlc3MpXG5cbiAgY29uc3QgY29udHJhY3QgPSBuZXcgZXRoZXJzLkNvbnRyYWN0KENvbnRyYWN0QWRkcmVzcywgQ29udHJhY3RBYmksIHNpZ25lcilcbiAgcmV0dXJuIGNvbnRyYWN0XG59XG5cbmNvbnN0IGNvbm5lY3RXYWxsZXQgPSBhc3luYyAoKSA9PiB7XG4gIHRyeSB7XG4gICAgaWYgKCFldGhlcmV1bSkgcmV0dXJuIHJlcG9ydEVycm9yKCdQbGVhc2UgaW5zdGFsbCBNZXRhbWFzaycpXG4gICAgLy9yZXF1ZXN0IHVzZXIgYWNjb3VudHMgZnJvbSBtZXRhbWFzay4gZGFwcCByZXF1ZXN0IGFjY2VzcyB0byB1c2VyJ3MgZXRoZXJldW0gYWNjb3VudHNcblxuICAgIGNvbnN0IGFjY291bnRzID0gYXdhaXQgZXRoZXJldW0ucmVxdWVzdD8uKHsgbWV0aG9kOiAnZXRoX3JlcXVlc3RBY2NvdW50cycgfSlcbiAgICBzdG9yZS5kaXNwYXRjaChzZXRXYWxsZXQoYWNjb3VudHM/LlswXSkpIC8vIHdhbGxldCBhZGRyZXNzIHN0b3JlZC4gYWNjZXNzIGZpcnN0IGFjY291bnQgaW4gYXJyYXlcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZXBvcnRFcnJvcihlcnJvcilcbiAgfVxufVxuXG5jb25zdCBjaGVja1dhbGxldCA9IGFzeW5jICgpID0+IHtcbiAgdHJ5IHtcbiAgICBpZiAoIWV0aGVyZXVtKSByZXR1cm4gcmVwb3J0RXJyb3IoJ1BsZWFzZSBpbnN0YWxsIE1ldGFtYXNrJylcbiAgICBjb25zdCBhY2NvdW50cyA9IGF3YWl0IGV0aGVyZXVtLnJlcXVlc3Q/Lih7IG1ldGhvZDogJ2V0aF9hY2NvdW50cycgfSlcblxuICAgIC8vIG1vbml0b3IgY2hhaW4gY2hhbmdlXG4gICAgZXRoZXJldW0ub24oJ2NoYWluQ2hhbmdlZCcsICgpID0+IHtcbiAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKVxuICAgIH0pXG5cbiAgICBldGhlcmV1bS5vbignYWNjb3VudHNDaGFuZ2VkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgc3RvcmUuZGlzcGF0Y2goc2V0V2FsbGV0KGFjY291bnRzPy5bMF0pKVxuICAgICAgYXdhaXQgY2hlY2tXYWxsZXQoKVxuICAgIH0pXG5cbiAgICBpZiAoYWNjb3VudHM/Lmxlbmd0aCkge1xuICAgICAgc3RvcmUuZGlzcGF0Y2goc2V0V2FsbGV0KGFjY291bnRzWzBdKSlcbiAgICB9IGVsc2Uge1xuICAgICAgc3RvcmUuZGlzcGF0Y2goc2V0V2FsbGV0KCcnKSlcbiAgICAgIHJlcG9ydEVycm9yKCdQbGVhc2UgY29ubmVjdCB3YWxsZXQsIG5vIGFjY291bnRzIGZvdW5kLicpXG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJlcG9ydEVycm9yKGVycm9yKVxuICB9XG59XG5cbmNvbnN0IGdldFF1ZXN0aW9ucyA9IGFzeW5jICgpOiBQcm9taXNlPFF1ZXN0aW9uUHJvcFtdPiA9PiB7XG4gIGNvbnN0IGNvbnRyYWN0ID0gYXdhaXQgZ2V0RXRoZXJldW1Db250cmFjdCgpXG4gIGNvbnN0IHF1ZXN0aW9ucyA9IGF3YWl0IGNvbnRyYWN0LmdldFF1ZXN0aW9ucygpXG4gIHJldHVybiBzdHJ1Y3R1cmVRdWVzdGlvbnMocXVlc3Rpb25zKVxufVxuXG5jb25zdCBnZXRRdWVzdGlvbiA9IGFzeW5jIChpZDogbnVtYmVyKTogUHJvbWlzZTxRdWVzdGlvblByb3A+ID0+IHtcbiAgY29uc3QgY29udHJhY3QgPSBhd2FpdCBnZXRFdGhlcmV1bUNvbnRyYWN0KClcbiAgY29uc3QgcXVlc3Rpb24gPSBhd2FpdCBjb250cmFjdC5nZXRRdWVzdGlvbihpZClcbiAgcmV0dXJuIHN0cnVjdHVyZVF1ZXN0aW9ucyhbcXVlc3Rpb25dKVswXVxufVxuXG5jb25zdCBjcmVhdGVRdWVzdGlvbiA9IGFzeW5jIChkYXRhOiBRdWVzdGlvblBhcmFtcykgPT4ge1xuICBpZiAoIWV0aGVyZXVtKSB7XG4gICAgcmVwb3J0RXJyb3IoJ1BsZWFzZSBpbnN0YWxsIE1ldGFtYXNrJylcbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCdNZXRhbWFzayBub3QgaW5zdGFsbGVkJykpXG4gIH1cblxuICB0cnkge1xuICAgIGNvbnN0IGNvbnRyYWN0ID0gYXdhaXQgZ2V0RXRoZXJldW1Db250cmFjdCgpXG4gICAgY29uc29sZS5sb2coXCJUSEUgQ09OVFJBQ1RcIiwgY29udHJhY3QpXG4gICAgY29uc3QgeyB0aXRsZSwgZGVzY3JpcHRpb24sIHRhZ3MsIHByaXplIH0gPSBkYXRhXG4gICAgY29uc29sZS5sb2coXCJUSEUgREFUQVwiLCBkYXRhKVxuICAgIHR4ID0gYXdhaXQgY29udHJhY3QuY3JlYXRlUXVlc3Rpb24odGl0bGUsIGRlc2NyaXB0aW9uLCB0YWdzLCB7XG4gICAgICB2YWx1ZTogdG9XZWkoTnVtYmVyKHByaXplKSksXG4gICAgfSlcbiAgICBjb25zb2xlLmxvZyhcInR4XCIsIHR4KVxuXG5cbiAgICBhd2FpdCB0eC53YWl0KClcbiAgICBjb25zb2xlLmxvZyhcInR4XCIsIHR4KVxuICAgIGNvbnN0IHF1ZXN0aW9ucyA9IGF3YWl0IGdldFF1ZXN0aW9ucygpXG4gICAgY29uc29sZS5sb2coXCJRVUVTVElPTlNcIiwgcXVlc3Rpb25zKVxuXG4gICAgc3RvcmUuZGlzcGF0Y2goc2V0UXVlc3Rpb25zKHF1ZXN0aW9ucykpXG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0eClcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZXBvcnRFcnJvcihlcnJvcilcbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpXG4gIH1cbn1cblxuY29uc3QgdXBkYXRlUXVlc3Rpb24gPSBhc3luYyAoaWQ6IG51bWJlciwgZGF0YTogUXVlc3Rpb25QYXJhbXMpID0+IHtcbiAgaWYgKCFldGhlcmV1bSkge1xuICAgIHJlcG9ydEVycm9yKCdQbGVhc2UgaW5zdGFsbCBNZXRhbWFzaycpXG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcignTWV0YW1hc2sgbm90IGluc3RhbGxlZCcpKVxuICB9XG5cbiAgdHJ5IHtcbiAgICBjb25zdCBjb250cmFjdCA9IGF3YWl0IGdldEV0aGVyZXVtQ29udHJhY3QoKVxuICAgIGNvbnN0IHsgdGl0bGUsIGRlc2NyaXB0aW9uLCB0YWdzIH0gPSBkYXRhXG4gICAgdHggPSBhd2FpdCBjb250cmFjdC51cGRhdGVRdWVzdGlvbihpZCwgdGl0bGUsIGRlc2NyaXB0aW9uLCB0YWdzKVxuXG4gICAgYXdhaXQgdHgud2FpdCgpXG4gICAgY29uc3QgcXVlc3Rpb24gPSBhd2FpdCBnZXRRdWVzdGlvbihpZClcblxuICAgIHN0b3JlLmRpc3BhdGNoKHNldFF1ZXN0aW9uKHF1ZXN0aW9uKSlcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHR4KVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJlcG9ydEVycm9yKGVycm9yKVxuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcilcbiAgfVxufVxuXG5jb25zdCBkZWxldGVRdWVzdGlvbiA9IGFzeW5jIChpZDogbnVtYmVyKSA9PiB7XG4gIGlmICghZXRoZXJldW0pIHtcbiAgICByZXBvcnRFcnJvcignUGxlYXNlIGluc3RhbGwgTWV0YW1hc2snKVxuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoJ01ldGFtYXNrIG5vdCBpbnN0YWxsZWQnKSlcbiAgfVxuXG4gIHRyeSB7XG4gICAgY29uc3QgY29udHJhY3QgPSBhd2FpdCBnZXRFdGhlcmV1bUNvbnRyYWN0KClcbiAgICB0eCA9IGF3YWl0IGNvbnRyYWN0LmRlbGV0ZVF1ZXN0aW9uKGlkKVxuXG4gICAgYXdhaXQgdHgud2FpdCgpXG4gICAgY29uc3QgcXVlc3Rpb24gPSBhd2FpdCBnZXRRdWVzdGlvbihpZClcblxuICAgIHN0b3JlLmRpc3BhdGNoKHNldFF1ZXN0aW9uKHF1ZXN0aW9uKSlcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHR4KVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJlcG9ydEVycm9yKGVycm9yKVxuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcilcbiAgfVxufVxuXG5jb25zdCBjcmVhdGVBbnN3ZXIgPSBhc3luYyAoaWQ6IG51bWJlciwgYW5zd2VyOiBzdHJpbmcpID0+IHtcbiAgaWYgKCFldGhlcmV1bSkge1xuICAgIHJlcG9ydEVycm9yKCdQbGVhc2UgaW5zdGFsbCBNZXRhbWFzaycpXG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcignTWV0YW1hc2sgbm90IGluc3RhbGxlZCcpKVxuICB9XG5cbiAgdHJ5IHtcbiAgICBjb25zdCBjb250cmFjdCA9IGF3YWl0IGdldEV0aGVyZXVtQ29udHJhY3QoKVxuICAgIHR4ID0gYXdhaXQgY29udHJhY3QuYWRkQW5zd2VyKGlkLCBhbnN3ZXIpXG5cbiAgICBhd2FpdCB0eC53YWl0KClcbiAgICBjb25zdCBxdWVzdGlvbiA9IGF3YWl0IGdldFF1ZXN0aW9uKGlkKVxuICAgIGNvbnN0IGFuc3dlcnMgPSBhd2FpdCBnZXRBbnN3ZXJzKGlkKVxuXG4gICAgc3RvcmUuZGlzcGF0Y2goc2V0UXVlc3Rpb24ocXVlc3Rpb24pKVxuICAgIHN0b3JlLmRpc3BhdGNoKHNldEFuc3dlcnMoYW5zd2VycykpXG5cbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHR4KVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJlcG9ydEVycm9yKGVycm9yKVxuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcilcbiAgfVxufVxuXG5jb25zdCBwYXlXaW5uZXIgPSBhc3luYyAocWlkOiBudW1iZXIsIGlkOiBudW1iZXIpID0+IHtcbiAgaWYgKCFldGhlcmV1bSkge1xuICAgIHJlcG9ydEVycm9yKCdQbGVhc2UgaW5zdGFsbCBNZXRhbWFzaycpXG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcignTWV0YW1hc2sgbm90IGluc3RhbGxlZCcpKVxuICB9XG5cbiAgdHJ5IHtcbiAgICBjb25zdCBjb250cmFjdCA9IGF3YWl0IGdldEV0aGVyZXVtQ29udHJhY3QoKVxuICAgIHR4ID0gYXdhaXQgY29udHJhY3QucGF5V2lubmVyKHFpZCwgaWQpXG5cbiAgICBhd2FpdCB0eC53YWl0KClcbiAgICBjb25zdCBxdWVzdGlvbiA9IGF3YWl0IGdldFF1ZXN0aW9uKGlkKVxuICAgIGNvbnN0IGFuc3dlcnMgPSBhd2FpdCBnZXRBbnN3ZXJzKGlkKVxuXG4gICAgc3RvcmUuZGlzcGF0Y2goc2V0UXVlc3Rpb24ocXVlc3Rpb24pKVxuICAgIHN0b3JlLmRpc3BhdGNoKHNldEFuc3dlcnMoYW5zd2VycykpXG5cbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHR4KVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJlcG9ydEVycm9yKGVycm9yKVxuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcilcbiAgfVxufVxuXG5jb25zdCBnZXRBbnN3ZXJzID0gYXN5bmMgKGlkOiBudW1iZXIpOiBQcm9taXNlPEFuc3dlclByb3BbXT4gPT4ge1xuICBjb25zdCBjb250cmFjdCA9IGF3YWl0IGdldEV0aGVyZXVtQ29udHJhY3QoKVxuICBjb25zdCBhbnN3ZXJzID0gYXdhaXQgY29udHJhY3QuZ2V0QW5zd2VycyhpZClcbiAgcmV0dXJuIHN0cnVjdHVyZUFuc3dlcnMoYW5zd2VycykgfHwgW11cbn1cblxuY29uc3QgbG9hZERhdGEgPSBhc3luYyAoKSA9PiB7XG4gIGF3YWl0IGdldFF1ZXN0aW9ucygpXG59XG5cbmNvbnN0IHJlcG9ydEVycm9yID0gKGVycm9yOiBhbnkpID0+IHtcbiAgY29uc29sZS5sb2coZXJyb3IpXG59XG5cbmNvbnN0IHN0cnVjdHVyZVF1ZXN0aW9ucyA9IChxdWVzdGlvbnM6IGFueVtdKTogUXVlc3Rpb25Qcm9wW10gPT5cbiAgcXVlc3Rpb25zXG4gICAgLm1hcCgocXVlc3Rpb24pID0+ICh7XG4gICAgICBpZDogTnVtYmVyKHF1ZXN0aW9uLmlkKSxcbiAgICAgIHRpdGxlOiBxdWVzdGlvbi50aXRsZSxcbiAgICAgIGRlc2NyaXB0aW9uOiBxdWVzdGlvbi5kZXNjcmlwdGlvbixcbiAgICAgIG93bmVyOiBxdWVzdGlvbi5vd25lci50b0xvd2VyQ2FzZSgpLFxuICAgICAgd2lubmVyOiBxdWVzdGlvbi53aW5uZXIudG9Mb3dlckNhc2UoKSxcbiAgICAgIHBhaWRvdXQ6IHF1ZXN0aW9uLnBhaWRvdXQsXG4gICAgICBkZWxldGVkOiBxdWVzdGlvbi5kZWxldGVkLFxuICAgICAgdXBkYXRlZDogTnVtYmVyKHF1ZXN0aW9uLnVwZGF0ZWQpLFxuICAgICAgY3JlYXRlZDogTnVtYmVyKHF1ZXN0aW9uLmNyZWF0ZWQpLFxuICAgICAgYW5zd2VyczogTnVtYmVyKHF1ZXN0aW9uLmFuc3dlcnMpLFxuICAgICAgdGFnczogcXVlc3Rpb24udGFncy5zcGxpdCgnLCcpLm1hcCgodGFnOiBzdHJpbmcpID0+IHRhZy50cmltKCkpLFxuICAgICAgcHJpemU6IGZyb21XZWkocXVlc3Rpb24ucHJpemUpLFxuICAgIH0pKVxuICAgIC5zb3J0KChhLCBiKSA9PiBiLmNyZWF0ZWQgLSBhLmNyZWF0ZWQpXG5cbmNvbnN0IHN0cnVjdHVyZUFuc3dlcnMgPSAoYW5zd2VyczogYW55W10pOiBBbnN3ZXJQcm9wW10gPT5cbiAgYW5zd2Vyc1xuICAgIC5tYXAoKGFuc3dlcikgPT4gKHtcbiAgICAgIGlkOiBOdW1iZXIoYW5zd2VyLmlkKSxcbiAgICAgIHFpZDogTnVtYmVyKGFuc3dlci5xaWQpLFxuICAgICAgY29tbWVudDogYW5zd2VyLmNvbW1lbnQsXG4gICAgICBvd25lcjogYW5zd2VyLm93bmVyLnRvTG93ZXJDYXNlKCksXG4gICAgICBkZWxldGVkOiBhbnN3ZXIuZGVsZXRlZCxcbiAgICAgIGNyZWF0ZWQ6IE51bWJlcihhbnN3ZXIuY3JlYXRlZCksXG4gICAgICB1cGRhdGVkOiBOdW1iZXIoYW5zd2VyLnVwZGF0ZWQpLFxuICAgIH0pKVxuICAgIC5zb3J0KChhLCBiKSA9PiBiLnVwZGF0ZWQgLSBhLnVwZGF0ZWQpXG5cbmV4cG9ydCB7XG4gIGNvbm5lY3RXYWxsZXQsXG4gIGNoZWNrV2FsbGV0LFxuICBsb2FkRGF0YSxcbiAgZ2V0UXVlc3Rpb25zLFxuICBnZXRRdWVzdGlvbixcbiAgY3JlYXRlUXVlc3Rpb24sXG4gIHVwZGF0ZVF1ZXN0aW9uLFxuICBkZWxldGVRdWVzdGlvbixcbiAgY3JlYXRlQW5zd2VyLFxuICBnZXRBbnN3ZXJzLFxuICBwYXlXaW5uZXIsXG59XG4iXSwibmFtZXMiOlsic3RvcmUiLCJldGhlcnMiLCJnbG9iYWxBY3Rpb25zIiwiYWRkcmVzcyIsImFiaSIsInNldFdhbGxldCIsInNldEFuc3dlcnMiLCJzZXRRdWVzdGlvbiIsInNldFF1ZXN0aW9ucyIsIkNvbnRyYWN0QWRkcmVzcyIsIkNvbnRyYWN0QWJpIiwiZXRoZXJldW0iLCJ0eCIsIndpbmRvdyIsInRvV2VpIiwibnVtIiwidXRpbHMiLCJwYXJzZUV0aGVyIiwidG9TdHJpbmciLCJmcm9tV2VpIiwiZm9ybWF0RXRoZXIiLCJnZXRFdGhlcmV1bUNvbnRyYWN0IiwiYWNjb3VudHMiLCJyZXF1ZXN0IiwibWV0aG9kIiwicHJvdmlkZXIiLCJwcm92aWRlcnMiLCJXZWIzUHJvdmlkZXIiLCJKc29uUnBjUHJvdmlkZXIiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9BUFBfUlBDX1VSTCIsIndhbGxldCIsIldhbGxldCIsImNyZWF0ZVJhbmRvbSIsInNpZ25lciIsImdldFNpZ25lciIsInVuZGVmaW5lZCIsImNvbnRyYWN0IiwiQ29udHJhY3QiLCJjb25uZWN0V2FsbGV0IiwicmVwb3J0RXJyb3IiLCJkaXNwYXRjaCIsImVycm9yIiwiY2hlY2tXYWxsZXQiLCJvbiIsImxvY2F0aW9uIiwicmVsb2FkIiwibGVuZ3RoIiwiZ2V0UXVlc3Rpb25zIiwicXVlc3Rpb25zIiwic3RydWN0dXJlUXVlc3Rpb25zIiwiZ2V0UXVlc3Rpb24iLCJpZCIsInF1ZXN0aW9uIiwiY3JlYXRlUXVlc3Rpb24iLCJkYXRhIiwiUHJvbWlzZSIsInJlamVjdCIsIkVycm9yIiwiY29uc29sZSIsImxvZyIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJ0YWdzIiwicHJpemUiLCJ2YWx1ZSIsIk51bWJlciIsIndhaXQiLCJyZXNvbHZlIiwidXBkYXRlUXVlc3Rpb24iLCJkZWxldGVRdWVzdGlvbiIsImNyZWF0ZUFuc3dlciIsImFuc3dlciIsImFkZEFuc3dlciIsImFuc3dlcnMiLCJnZXRBbnN3ZXJzIiwicGF5V2lubmVyIiwicWlkIiwic3RydWN0dXJlQW5zd2VycyIsImxvYWREYXRhIiwibWFwIiwib3duZXIiLCJ0b0xvd2VyQ2FzZSIsIndpbm5lciIsInBhaWRvdXQiLCJkZWxldGVkIiwidXBkYXRlZCIsImNyZWF0ZWQiLCJzcGxpdCIsInRhZyIsInRyaW0iLCJzb3J0IiwiYSIsImIiLCJjb21tZW50Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./services/blockchain.ts\n"));

/***/ })

});